"use strict";(self.webpackChunksocial_media_app=self.webpackChunksocial_media_app||[]).push([[833],{7964:function(n,t,e){e.d(t,{Jq:function(){return o},TJ:function(){return x},fR:function(){return v},fX:function(){return h},n9:function(){return d},qb:function(){return s},tf:function(){return a},ud:function(){return l},xV:function(){return u},xl:function(){return c}});var i=e(4569),r=e.n(i)().create({baseURL:"http://ec2-54-175-11-135.compute-1.amazonaws.com:8000/api/post"});r.interceptors.request.use((function(n){if(Boolean(localStorage.getItem("persist:root"))){var t=JSON.parse(JSON.parse(localStorage.getItem("persist:root")).user).token;n.headers.authorization="Bearer ".concat(t)}return n}));var o=function(){return r.get("/")},a=function(){return r.get("/feed")},c=function(n){return r.get("/".concat(n))},s=function(n){return r.post("/",n)},l=function(){return r.post("/saved")},u=function(n){return r.post("/postsby/".concat(n))},d=function(n){return r.patch("/".concat(n,"/like"))},x=function(n){return r.post("/".concat(n,"/save"))},h=function(n,t){return r.patch("/".concat(n,"/comment"),t)},v=function(n){return r.delete("/".concat(n))}},9977:function(n,t,e){var i=e(228),r=e(9434),o=e(4112),a=e(184);t.Z=function(n){var t=n.posts,e=(0,r.v9)((function(n){return n.user.currentUser})),c=null===e||void 0===e?void 0:e._id;return(0,a.jsx)(i.Z,{sx:{minHeight:"100vh"},m:0,flex:4,p:2,children:t.map((function(n){var t=n.likes.findIndex((function(n){return n===c}));return(0,a.jsx)(o.Z,{post:n,liked:-1!==t},n._id)}))})}},4112:function(n,t,e){e.d(t,{Z:function(){return sn}});var i=e(8214),r=e(5861),o=e(1413),a=e(885),c=e(4942),s=e(8928),l=e(199),u=e(5194),d=e(4565),x=e(1868),h=e(1091),v=e(6875),m=e(3811),f=e(5473),Z=e(1577),p=e(7244),j=e(2791),g=e(9434),k=e(7964),b=e(6398),C=e(3978),w=e(2898),I=e(6871),_=e(184),y=function(n){var t,e=n.author,i=n.subtitle,r=n.setAnchor,o=n.noAction,a=n.id,c=(0,I.s0)();return(0,_.jsx)(b.Z,{avatar:null!==e&&void 0!==e&&e.avatar?(0,_.jsx)(m.Z,{sx:{m:0,p:0},onClick:function(){return c("/user/".concat(a))},children:(0,_.jsx)(C.Z,{alt:"User Avatar",src:null===e||void 0===e?void 0:e.avatar})}):(0,_.jsx)(m.Z,{onClick:function(){return c("/")},children:(0,_.jsx)(C.Z,{sx:{bgcolor:"red"},alt:"User Avatar",children:null===e||void 0===e||null===(t=e.displayName)||void 0===t?void 0:t.charAt(0)})}),action:o?null:(0,_.jsx)(m.Z,{"aria-label":"settings",onClick:function(n){return r(n.currentTarget)},children:(0,_.jsx)(w.Z,{})}),title:null===e||void 0===e?void 0:e.displayName,subheader:i})},S=e(4244),N=e(228),A=e(1898),H=e(9365),B=e(4420),U=e(8254),J=e(5629),T=e(6132),z=e(9562),E=e(4346),O=e(1872),q=e(2426),L=e.n(q),R=e(1686),D=function(n){var t=n.comments,e=n.expanded,i=n.postId,r=(0,j.useState)(!1),o=(0,a.Z)(r,2),c=o[0],s=o[1],l=(0,j.useState)(null),x=(0,a.Z)(l,2);x[0],x[1],(0,g.v9)((function(n){return n.user.currentUser}));return(0,_.jsx)(S.Z,{in:e,timeout:"auto",unmountOnExit:!0,children:(0,_.jsxs)(u.Z,{children:[(0,_.jsx)(N.Z,{component:"form",onSubmit:function(n){n.preventDefault(),(0,k.fX)(i,{comment:c})},children:(0,_.jsxs)(A.Z,{sx:{m:1,width:"100%"},variant:"outlined",children:[(0,_.jsx)(H.Z,{children:"Comment"}),(0,_.jsx)(B.Z,{onChange:function(n){return s(n.target.value)},endAdornment:(0,_.jsx)(U.Z,{position:"end",children:(0,_.jsx)(m.Z,{type:"submit",variant:"contained",children:(0,_.jsx)(R.Z,{})})}),label:"Comment"})]})}),(0,_.jsxs)(J.Z,{sx:{width:"100%",maxWidth:{lg:"80%"}},children:[null===t||void 0===t?void 0:t.map((function(n){var t=n._id,e=n.user,i=n.comment,r=n.createdAt;return(0,_.jsxs)(T.ZP,{alignItems:"flex-start",children:[(0,_.jsx)(z.Z,{children:(0,_.jsx)(C.Z,{alt:"Comment Author",src:e.avatar})}),(0,_.jsx)(E.Z,{primary:e.displayName,secondary:(0,_.jsxs)(_.Fragment,{children:[L()(r).fromNow(),(0,_.jsx)(d.Z,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:": ".concat(i)})]})})]},t)})),(0,_.jsx)(O.Z,{variant:"inset",component:"li"})]})]})})},G=e(5702),V=e(5514),F=function(n){var t=n.menuItemName,e=n.icon,i=n.clickHandler,r=n.postId;return(0,_.jsxs)(G.Z,{onClick:function(){return i(r)},children:[(0,_.jsx)(V.Z,{children:e}),(0,_.jsx)(d.Z,{variant:"inherit",noWrap:!0,children:t})]})},P=e(4891),W=e(91),X=e(7247),K=e(6152),M=e(1286),Q=e(7488),Y=e(580),$=e(7237),nn=e(3965),tn=e(6228),en=e(8384),rn=e(6711),on=e(277),an=e(295),cn=(0,on.ZP)(s.Z)((function(n){var t=n.theme;return(0,c.Z)({},t.breakpoints.down("md"),{marginBottom:"30px"})})),sn=function(n){var t,e,c,s=n.post,b=n.liked,C=n.edit,w=(0,j.useState)(null),S=(0,a.Z)(w,2),N=S[0],A=S[1],H=(0,j.useState)(!1),B=(0,a.Z)(H,2),U=B[0],J=B[1],T=(0,j.useState)({}),z=(0,a.Z)(T,2),E=z[0],O=z[1],q=(0,j.useState)(!1),R=(0,a.Z)(q,2),G=R[0],V=R[1],on=(0,g.I0)(),sn=(0,g.v9)((function(n){return n.user.currentUser?n.user.currentUser._id:null})),ln=(0,I.s0)();return(0,_.jsx)(cn,{children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y,{author:null===s||void 0===s?void 0:s.author,id:null===s||void 0===s?void 0:s.author._id,subtitle:L()(null===s||void 0===s?void 0:s.createdAt).fromNow(),setAnchor:A}),(0,_.jsx)(l.Z,{loading:"lazy",component:"img",height:"20%",image:null===s||void 0===s?void 0:s.img,alt:"Card Image"}),(0,_.jsxs)(u.Z,{children:[C?(0,_.jsxs)(P.Z,{spacing:2,children:[(0,_.jsx)(d.Z,{variant:"subtitle1",children:"Caption"}),(0,_.jsx)(x.Z,{sx:{width:"100%"},size:"small",placeholder:"Change Caption",defaultValue:null===s||void 0===s?void 0:s.caption,onChange:function(n){return O((0,o.Z)((0,o.Z)({},E),{},{caption:n.target.value}))}}),(0,_.jsx)(d.Z,{variant:"subtitle1",children:"Tags"}),(0,_.jsx)(x.Z,{sx:{width:"100%"},multiline:!0,rows:3,size:"small",placeholder:"Change Caption",defaultValue:null===s||void 0===s?void 0:s.tags,onChange:function(n){return O((0,o.Z)((0,o.Z)({},E),{},{tags:n.target.value}))}}),(0,_.jsx)(h.Z,{variant:"contained",sx:{width:"100%"},onClick:function(){},children:"Save"})]}):(0,_.jsx)(d.Z,{variant:"h6",color:"text.secondary",children:null===s||void 0===s?void 0:s.caption}),(0,_.jsxs)(d.Z,{variant:"caption",color:"text.secondary",children:["Likes: ",null===s||void 0===s||null===(t=s.likes)||void 0===t?void 0:t.length," Comments: ",null===s||void 0===s||null===(e=s.comments)||void 0===e?void 0:e.length]})]}),(0,_.jsxs)(v.Z,{disableSpacing:!0,children:[(0,_.jsx)(m.Z,{"aria-label":"add to favorites",onClick:function(){return(0,k.n9)(null===s||void 0===s?void 0:s._id)},children:(0,_.jsx)(f.Z,{icon:(0,_.jsx)(Q.Z,{}),checkedIcon:(0,_.jsx)($.Z,{sx:{color:"red"}}),defaultChecked:b})}),(0,_.jsx)(m.Z,{onClick:function(){return J(!U)},"aria-label":"share",children:(0,_.jsx)(nn.Z,{expand:U.toString(),"aria-expanded":U,"aria-label":"show more"})}),(0,_.jsx)(m.Z,{"aria-label":"add to favorites",onClick:(0,r.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,k.TJ)(null===s||void 0===s?void 0:s._id);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),on((0,an.b)(n.t0.response.data.message));case 8:case"end":return n.stop()}}),n,null,[[0,5]])}))),children:(0,_.jsx)(f.Z,{icon:(0,_.jsx)(W.Z,{}),checkedIcon:(0,_.jsx)(tn.Z,{})})})]}),(0,_.jsx)(D,{expanded:U,comments:null===s||void 0===s?void 0:s.comments,postId:null===s||void 0===s?void 0:s._id}),(0,_.jsx)(Z.Z,{anchorEl:N,onClose:function(){A(null),V(!1)},open:Boolean(N),children:G?(0,_.jsxs)(p.Z,{children:[(0,_.jsx)(F,{menuItemName:"Confirm",sx:{backgroundColor:"red"},clickHandler:function(){(0,k.fR)(null===s||void 0===s?void 0:s._id)},icon:(0,_.jsx)(en.Z,{sx:{color:"green"}})}),(0,_.jsx)(F,{menuItemName:"Cancel",clickHandler:function(){return V(!1)},icon:(0,_.jsx)(rn.Z,{sx:{color:"red"}})})]}):(0,_.jsxs)(p.Z,{children:[(null===s||void 0===s||null===(c=s.author)||void 0===c?void 0:c._id)===sn?(0,_.jsxs)(p.Z,{sx:{p:0},children:[(0,_.jsx)(F,{menuItemName:"Edit",clickHandler:function(){return ln("/post/edit/".concat(null===s||void 0===s?void 0:s._id))},icon:(0,_.jsx)(M.Z,{})}),(0,_.jsx)(F,{menuItemName:"Delete",clickHandler:function(){return V(!0)},postId:null===s||void 0===s?void 0:s._id,icon:(0,_.jsx)(X.Z,{})})]}):null,(0,_.jsx)(F,{menuItemName:"Share",icon:(0,_.jsx)(Y.Z,{}),clickHandler:function(){navigator.clipboard.writeText("http://localhost:3000/post/".concat(null===s||void 0===s?void 0:s._id))}}),(0,_.jsx)(F,{menuItemName:"Report",icon:(0,_.jsx)(K.Z,{}),clickHandler:function(){}})]})})]})})}},6081:function(n,t,e){var i=e(4942),r=e(8928),o=e(6398),a=e(1441),c=e(5194),s=e(225),l=e(9276),u=e(184),d=(0,s.Z)(r.Z)((function(n){var t=n.theme;return(0,i.Z)({},t.breakpoints.down("md"),{marginBottom:"30px"})}));t.Z=function(){return(0,u.jsx)(l.Z,{sx:{minHeight:"100vh",overflow:"hidden"},m:0,flex:4,p:2,children:(0,u.jsxs)(d,{children:[(0,u.jsx)(o.Z,{avatar:(0,u.jsx)(a.Z,{animation:"wave",variant:"circular",width:40,height:40}),title:(0,u.jsx)(a.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,u.jsx)(a.Z,{animation:"wave",height:10,width:"40%"})}),(0,u.jsx)(a.Z,{variant:"rectangular",sx:{height:"430px"}}),(0,u.jsxs)(c.Z,{children:[(0,u.jsx)(a.Z,{animation:"wave",height:30,style:{marginBottom:6}}),(0,u.jsx)(a.Z,{animation:"wave",height:10,width:"80%"})]})]})})}},2833:function(n,t,e){e.r(t);var i=e(885),r=e(9977),o=e(2791),a=e(7964),c=e(9434),s=e(224),l=e(6081),u=(e(295),e(184));t.default=function(){var n=(0,c.I0)(),t=(0,c.v9)((function(n){return n.post_loading})),e=(0,o.useState)([]),d=(0,i.Z)(e,2),x=d[0],h=d[1];return(0,o.useEffect)((function(){return(0,a.Jq)().then((function(t){h(t.data),n((0,s.o)())})),function(){n((0,s.o)())}}),[]),t?(0,u.jsx)(l.Z,{}):(0,u.jsx)(r.Z,{posts:x})}},224:function(n,t,e){e.d(t,{o:function(){return r}});var i=e(2824),r=function(n){return{type:i.Z.TOGGLE_LOADING}}}}]);
//# sourceMappingURL=833.15e32ba5.chunk.js.map